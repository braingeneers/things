(window["webpackJsonpbraingeneers-things-console"]=window["webpackJsonpbraingeneers-things-console"]||[]).push([[0],{226:function(t,e,n){t.exports=n(796)},231:function(t,e,n){},74:function(t,e){},796:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(32),i=n.n(r),s=(n(231),n(52)),c=n.n(s),u=n(98),l=n(215),h=n(44),d=n(216),p=n(217),g=n(222),m=n(810),w=n(811),b=n(812),f=n(813),v=n(814),y=n(815),k=n(221),S=n.n(k),A=n(67),E=n.n(A),O=n(218),I=n(29),x=n.n(I),P=n(97),j={Auth:{identityPoolId:"us-west-2:f533019d-9cbe-4a39-ad43-574c7316ad26",region:"us-west-2",userPoolId:"us-west-2_d9YBsfCk1",userPoolWebClientId:"54n46fo7gq5vprpg74qo4b8825",mandatorySignIn:!0,oauth:{domain:"braingeneers.auth.us-west-2.amazoncognito.com",scope:["email","openid","profile"],redirectSignIn:"localhost"===window.location.hostname?"http://localhost:3000/":"https://www.braingeneers.org/things/",redirectSignOut:"localhost"===window.location.hostname?"http://localhost:3000/":"https://www.braingeneers.org/things/",responseType:"token"}}};console.log(j),x.a.configure(j);var C=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(d.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(o)))).state={user:null,iot:null,things:null,loaded:!1,authenticated:!1},n}return Object(g.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=Object(u.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,I.Auth.currentAuthenticatedUser();case 3:return t.t1=t.sent,t.t2={user:t.t1},t.t0.setState.call(t.t0,t.t2),t.next=8,I.Auth.currentCredentials();case 8:return e=t.sent,E.a.config.update({region:j.Auth.region,accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,sessionToken:e.sessionToken}),t.prev=10,n=new E.a.Iot({credentials:e}),this.setState({iot:n}),t.t3=this,t.next=16,this.state.iot.listThings().promise();case 16:t.t4=t.sent,t.t5={things:t.t4},t.t3.setState.call(t.t3,t.t5),n.attachPrincipalPolicy({policyName:"default",principal:e.identityId},(function(t,e){t&&console.error(t)})),x.a.addPluggable(new P.AWSIoTProvider({aws_pubsub_region:j.Auth.region,aws_pubsub_endpoint:"wss://ahp00abmtph4i-ats.iot.us-west-2.amazonaws.com/mqtt"})),I.PubSub.subscribe("picroscope/#").subscribe({next:function(t){return console.log("Message received",t)},error:function(t){return console.error(t)},close:function(){return console.log("Done")}}),this.setState({authenticated:!0}),t.next=28;break;case 25:t.prev=25,t.t6=t.catch(10),console.log("Unable to authenticate",t.t6);case 28:this.setState({loaded:!0});case 29:case"end":return t.stop()}}),t,this,[[10,25]])})));return function(){return t.apply(this,arguments)}}()},{key:"publish",value:function(){var t=Object(u.a)(c.a.mark((function t(e,n,a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("".concat(e,"/").concat(n),a),t.next=3,I.PubSub.publish("".concat(e,"/").concat(n),{msg:a});case 3:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return this.state.loaded?this.state.authenticated?o.a.createElement(m.a,null,o.a.createElement(w.a,{variant:"outlined",onClick:function(){return I.Auth.signOut()}},"Sign Out"),o.a.createElement(b.a,null,this.state.things.things.map((function(e){return o.a.createElement(f.a,{key:e.thingArn},o.a.createElement(v.a,null,o.a.createElement(S.a,null)),o.a.createElement(y.a,{primary:e.thingName}),o.a.createElement(w.a,{variant:"outlined",color:"primary",onClick:function(){return t.publish("picroscope","start","a message")}},"Start"),o.a.createElement(w.a,{variant:"outlined",color:"secondary",onClick:function(){return t.publish("picroscope","stop","a message")}},"Stop"))})))):o.a.createElement(m.a,null,o.a.createElement(w.a,{variant:"outlined",onClick:function(){return I.Auth.signOut()}},"Sign Out"),"Not authorized"):o.a.createElement("div",null,"Loading...")}}]),e}(a.Component),T=Object(O.withAuthenticator)(C);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},81:function(t,e){}},[[226,1,2]]]);
//# sourceMappingURL=main.fe1141f2.chunk.js.map