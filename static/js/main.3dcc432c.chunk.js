(window["webpackJsonpbraingeneers-things-console"]=window["webpackJsonpbraingeneers-things-console"]||[]).push([[0],{226:function(e,t,n){e.exports=n(796)},231:function(e,t,n){},74:function(e,t){},796:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(32),i=n.n(r),s=(n(231),n(52)),c=n.n(s),l=n(98),u=n(215),h=n(44),d=n(216),p=n(217),g=n(222),m=n(817),b=n(811),w=n(812),f=n(813),v=n(814),y=n(815),k=n(816),E=n(818),A=n(221),S=n.n(A),I=n(67),O=n.n(I),x=n(218),P=n(29),j=n.n(P),C=n(97),T={Auth:{identityPoolId:"us-west-2:f533019d-9cbe-4a39-ad43-574c7316ad26",region:"us-west-2",userPoolId:"us-west-2_d9YBsfCk1",userPoolWebClientId:"54n46fo7gq5vprpg74qo4b8825",mandatorySignIn:!0,oauth:{domain:"braingeneers.auth.us-west-2.amazoncognito.com",scope:["email","openid","profile"],redirectSignIn:"localhost"===window.location.hostname?"http://localhost:3000/":"https://www.braingeneers.org/things/",redirectSignOut:"localhost"===window.location.hostname?"http://localhost:3000/":"https://www.braingeneers.org/things/",responseType:"token"}}};j.a.configure(T);var _=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={user:null,iot:null,things:null,loaded:!1,authenticated:!1},n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,P.Auth.currentAuthenticatedUser();case 3:return e.t1=e.sent,e.t2={user:e.t1},e.t0.setState.call(e.t0,e.t2),e.next=8,P.Auth.currentCredentials();case 8:return t=e.sent,O.a.config.update({region:T.Auth.region,accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,sessionToken:t.sessionToken}),e.prev=10,n=new O.a.Iot({credentials:t}),this.setState({iot:n}),e.t3=this,e.next=16,this.state.iot.listThings().promise();case 16:e.t4=e.sent,e.t5={things:e.t4},e.t3.setState.call(e.t3,e.t5),n.attachPrincipalPolicy({policyName:"default",principal:t.identityId},(function(e,t){e&&console.error(e)})),j.a.addPluggable(new C.AWSIoTProvider({aws_pubsub_region:T.Auth.region,aws_pubsub_endpoint:"wss://ahp00abmtph4i-ats.iot.us-west-2.amazonaws.com/mqtt"})),P.PubSub.subscribe("picroscope/#").subscribe({next:function(e){return console.log("Message received",e)},error:function(e){return console.error(e)},close:function(){return console.log("Done")}}),this.setState({authenticated:!0}),e.next=28;break;case 25:e.prev=25,e.t6=e.catch(10),console.log("Unable to authenticate",e.t6);case 28:this.setState({loaded:!0});case 29:case"end":return e.stop()}}),e,this,[[10,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"publish",value:function(){var e=Object(l.a)(c.a.mark((function e(t,n){var a,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},console.log("".concat(t,"/").concat(n),a),e.next=4,P.PubSub.publish("".concat(t,"/").concat(n),a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.loaded?this.state.authenticated?o.a.createElement("div",null,o.a.createElement(m.a,{position:"static"},o.a.createElement(f.a,null,o.a.createElement("img",{src:"logo36.png",alt:"Braingeneers"}),o.a.createElement(b.a,{color:"inherit",onClick:function(){return P.Auth.signOut()}},"Logout"))),o.a.createElement(v.a,null,this.state.things.things.map((function(t){return o.a.createElement(y.a,{key:t.thingArn},o.a.createElement(k.a,null,o.a.createElement(S.a,null)),o.a.createElement(E.a,{primary:t.thingName}),o.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:function(){return e.publish(t.thingName,"start",{})}},"Start"),o.a.createElement(b.a,{variant:"outlined",color:"secondary",onClick:function(){return e.publish(t.thingName,"stop",{})}},"Stop"))})))):o.a.createElement("div",null,o.a.createElement(m.a,{position:"static"},o.a.createElement(b.a,{color:"inherit",onClick:function(){return P.Auth.signOut()}},"Logout")),o.a.createElement(w.a,null,"You're email address has not been authorized")):o.a.createElement("div",null,"Loading...")}}]),t}(a.Component),B=Object(x.withAuthenticator)(_);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},81:function(e,t){}},[[226,1,2]]]);
//# sourceMappingURL=main.3dcc432c.chunk.js.map